<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prototipo PET 2D – Juego accesible</title>
  <link rel="stylesheet" href="styles.css">
  <script src="app.js" type="module" defer></script>
</head>
<body>
  <a class="skip-link" href="#contenido-principal">Saltar al contenido principal</a>
  <header class="site-header">
    <div class="branding">
      <p class="eyebrow">Prototipo accesible</p>
      <h1>Juego de recolección de PET</h1>
      <p class="lede">Controla el bote, recoge PET y vacíalo para enviarlo al almacenamiento.</p>
    </div>
  </header>

  <main id="contenido-principal" class="layout" aria-labelledby="titulo-juego">
    <section class="game-panel" aria-labelledby="titulo-juego">
      <div class="section-header">
        <h2 id="titulo-juego">Simulación 2D en Canvas</h2>
        <p class="lede">Movimientos con teclado o botones en pantalla. Vacía el bote para liberar capacidad.</p>
      </div>
      <div class="game-wrapper" role="group" aria-label="Área de juego">
        <canvas id="juego-canvas" width="960" height="540" role="img" aria-label="Minijuego de recolección de PET"></canvas>
        <div class="controls" aria-label="Controles del bote">
          <button type="button" id="mover-izquierda" aria-keyshortcuts="ArrowLeft" aria-label="Mover bote a la izquierda">⟵ Izquierda</button>
          <button type="button" id="vaciar-bote" aria-keyshortcuts="Space" aria-label="Vaciar bote y enviar al almacenamiento">Vaciar bote</button>
          <button type="button" id="mover-derecha" aria-keyshortcuts="ArrowRight" aria-label="Mover bote a la derecha">Derecha ⟶</button>
        </div>
      </div>
    </section>

    <section class="status-panel" aria-labelledby="titulo-estado">
      <div class="section-header">
        <h2 id="titulo-estado">Estado del bote y contaminación</h2>
        <p class="lede">Capacidad, contaminación acumulada y conteo en almacenamiento.</p>
      </div>
      <dl class="hud" aria-live="polite">
        <div>
          <dt>Capacidad actual</dt>
          <dd id="hud-capacidad-actual">0</dd>
        </div>
        <div>
          <dt>Capacidad máxima</dt>
          <dd id="hud-capacidad-maxima">0</dd>
        </div>
        <div>
          <dt>Nivel de contaminación</dt>
          <dd id="hud-contaminacion">0%</dd>
        </div>
      </dl>
      <section class="storage" aria-labelledby="titulo-almacenamiento">
        <h3 id="titulo-almacenamiento">Almacenamiento</h3>
        <div class="storage-grid">
          <article aria-labelledby="materiales-sin-procesar" class="storage-card">
            <h4 id="materiales-sin-procesar">Materiales sin procesar (PET)</h4>
            <ul>
              <li>Transparente: <span id="hud-pet-transparente">0</span></li>
              <li>Azul: <span id="hud-pet-azul">0</span></li>
              <li>Verde: <span id="hud-pet-verde">0</span></li>
              <li>Dorado: <span id="hud-pet-dorado">0</span></li>
            </ul>
          </article>
          <article aria-labelledby="componentes-titulo" class="storage-card">
            <h4 id="componentes-titulo">Componentes</h4>
            <p><span id="hud-componentes">0</span> unidades</p>
          </article>
          <article aria-labelledby="maquinaria-titulo" class="storage-card">
            <h4 id="maquinaria-titulo">Maquinaria</h4>
            <p><span id="hud-maquinaria">0</span> equipos</p>
          </article>
        </div>
      </section>
    </section>
  </main>

  <section class="garden-panel" aria-labelledby="titulo-jardin">
    <div class="section-header">
      <h2 id="titulo-jardin">Jardín emergente 42x42</h2>
      <p class="lede">
        Simulación de un tapete de trébol blanco que reacciona a humedad, nutrientes, sol y compactación del suelo.
      </p>
    </div>

    <div class="game-wrapper" role="group" aria-label="Jardín en cuadrícula de 42 por 42 celdas">
      <canvas id="jardin-canvas" width="672" height="672" role="img"
        aria-label="Vista del jardín donde crecen plantas según las condiciones del suelo"></canvas>
      <dl class="hud hud-garden" aria-live="polite">
        <div>
          <dt>Cobertura vegetal</dt>
          <dd id="hud-cobertura">0%</dd>
        </div>
        <div>
          <dt>Biomasa estimada</dt>
          <dd id="hud-biomasa">0.0</dd>
        </div>
        <div>
          <dt>Humedad media</dt>
          <dd id="hud-humedad">0.0</dd>
        </div>
        <div>
          <dt>Nutrientes medios</dt>
          <dd id="hud-nutrientes">0.0</dd>
        </div>
        <div>
          <dt>Compactación media</dt>
          <dd id="hud-compactacion">0.0</dd>
        </div>
      </dl>
    </div>

    <section class="rules" aria-labelledby="titulo-reglas-jardin">
      <h3 id="titulo-reglas-jardin">Reglas y justificación</h3>
      <p>
        Se eligió el <strong>trébol blanco</strong> por su resistencia, crecimiento rastrero y capacidad de fijar nitrógeno. Estas
        características permiten observar dinámicas emergentes interesantes sin requerir un sistema de riego perfecto.
      </p>
      <ul>
        <li><strong>Recursos por celda:</strong> cada casilla guarda humedad, nutrientes, sol y compactación. Se ajustan con ruido
          ambiental (evaporación, lluvia ligera, recuperación de nutrientes).</li>
        <li><strong>Crecimiento:</strong> el trébol crece si humedad (0.35–0.75) y nutrientes (0.4–1) están en rango y la compactación no supera 0.7.
          Fuera de rango la planta pierde vigor y puede secarse.</li>
        <li><strong>Temperatura y sol:</strong> el calor excesivo reduce humedad útil, mientras que buena radiación acelera ligeramente el crecimiento.</li>
        <li><strong>Expansión:</strong> cuando una planta es madura y hay recursos suficientes, emite estolones a celdas vecinas con probabilidades
          mayores en suelos húmedos. La expansión usa nutrientes y humedad del origen.</li>
        <li><strong>Competencia:</strong> demasiadas plantas alrededor elevan la demanda y bajan el crecimiento, generando patrones de parches densos y claros.</li>
      </ul>
      <p class="lede">
        El objetivo es mostrar un sistema emergente que pueda escalar a datos reales de sensores de humedad, temperatura o compostaje
        en fases futuras del proyecto.
      </p>
    </section>
  </section>

  <footer class="site-footer">
    <p>Prototipo funcional enfocado en accesibilidad, rendimiento y jugabilidad móvil.</p>
    <p>Controles: teclas de flecha o botones en pantalla. Espacio para vaciar.</p>
  </footer>
</body>
</html>
