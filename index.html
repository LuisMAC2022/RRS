<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prototipo PET 2D – Juego accesible</title>
  <link rel="stylesheet" href="styles.css">
  <script src="app.js" type="module" defer></script>
</head>
<body>
  <a class="skip-link" href="#contenido-principal">Saltar al contenido principal</a>
  <header class="site-header">
    <div class="branding">
      <p class="eyebrow">Prototipo accesible</p>
      <h1>Juego de recolección de PET</h1>
      <p class="lede">Controla el bote, recoge PET y vacíalo para enviarlo al almacenamiento.</p>
    </div>
  </header>

  <main id="contenido-principal" class="layout" aria-labelledby="titulo-juego">
    <section class="game-panel" aria-labelledby="titulo-juego">
      <div class="section-header">
        <h2 id="titulo-juego">Simulación 2D en Canvas</h2>
        <p class="lede">Movimientos con teclado o botones en pantalla. Vacía el bote para liberar capacidad.</p>
      </div>
      <div class="game-wrapper" role="group" aria-label="Área de juego">
        <canvas id="juego-canvas" width="960" height="540" role="img" aria-label="Minijuego de recolección de PET"></canvas>
        <div class="controls" aria-label="Controles del bote">
          <button type="button" id="mover-izquierda" aria-keyshortcuts="ArrowLeft" aria-label="Mover bote a la izquierda">⟵ Izquierda</button>
          <button type="button" id="vaciar-bote" aria-keyshortcuts="Space" aria-label="Vaciar bote y enviar al almacenamiento">Vaciar bote</button>
          <button type="button" id="mover-derecha" aria-keyshortcuts="ArrowRight" aria-label="Mover bote a la derecha">Derecha ⟶</button>
        </div>
      </div>
    </section>

    <section class="status-panel" aria-labelledby="titulo-estado">
      <div class="section-header">
        <h2 id="titulo-estado">Estado del bote y contaminación</h2>
        <p class="lede">Capacidad, contaminación acumulada y conteo en almacenamiento.</p>
      </div>
      <dl class="hud" aria-live="polite">
        <div>
          <dt>Capacidad actual</dt>
          <dd id="hud-capacidad-actual">0</dd>
        </div>
        <div>
          <dt>Capacidad máxima</dt>
          <dd id="hud-capacidad-maxima">0</dd>
        </div>
        <div>
          <dt>Nivel de contaminación</dt>
          <dd id="hud-contaminacion">0%</dd>
        </div>
      </dl>
      <section class="storage" aria-labelledby="titulo-almacenamiento">
        <h3 id="titulo-almacenamiento">Almacenamiento</h3>
        <div class="storage-grid">
          <article aria-labelledby="materiales-sin-procesar" class="storage-card">
            <h4 id="materiales-sin-procesar">Materiales sin procesar (PET)</h4>
            <ul>
              <li>Transparente: <span id="hud-pet-transparente">0</span></li>
              <li>Azul: <span id="hud-pet-azul">0</span></li>
              <li>Verde: <span id="hud-pet-verde">0</span></li>
              <li>Dorado: <span id="hud-pet-dorado">0</span></li>
            </ul>
          </article>
          <article aria-labelledby="componentes-titulo" class="storage-card">
            <h4 id="componentes-titulo">Componentes</h4>
            <p><span id="hud-componentes">0</span> unidades</p>
          </article>
          <article aria-labelledby="maquinaria-titulo" class="storage-card">
            <h4 id="maquinaria-titulo">Maquinaria</h4>
            <p><span id="hud-maquinaria">0</span> equipos</p>
          </article>
        </div>
      </section>
    </section>

    <section class="garden-panel" aria-labelledby="titulo-jardin">
      <div class="section-header">
        <h2 id="titulo-jardin">Jardín emergente 42×42</h2>
        <p class="lede">Ciclo de vida del trébol blanco con reglas de suelo, humedad y reproducción natural.</p>
      </div>

      <div class="garden-layout">
        <div class="garden-canvas-wrapper" role="group" aria-label="Área del jardín emergente">
          <canvas
            id="garden-canvas"
            width="672"
            height="672"
            role="img"
            aria-label="Simulación del jardín en cuadrícula de 42 por 42 celdas"
          ></canvas>
        </div>

        <aside class="garden-hud" aria-labelledby="hud-jardin-titulo">
          <h3 id="hud-jardin-titulo">Indicadores del jardín</h3>
          <dl>
            <div>
              <dt>Humedad promedio</dt>
              <dd id="hud-humedad-promedio">0</dd>
            </div>
            <div>
              <dt>Nutrientes promedio</dt>
              <dd id="hud-nutrientes-promedio">0</dd>
            </div>
            <div>
              <dt>Cobertura vegetal</dt>
              <dd id="hud-cobertura">0%</dd>
            </div>
            <div>
              <dt>Reproducción activa</dt>
              <dd id="hud-reproduccion">0 eventos/min</dd>
            </div>
          </dl>
          <p class="hud-note">Valores normalizados entre 0 y 1 para reflejar la salud del suelo y la planta.</p>
        </aside>
      </div>

      <section class="garden-rules" aria-labelledby="titulo-reglas-jardin">
        <h3 id="titulo-reglas-jardin">Reglas emergentes y elección de especie</h3>
        <ul>
          <li><strong>Especie elegida:</strong> trébol blanco (Trifolium repens) por su crecimiento rastrero, fijación de nitrógeno y resistencia; permite observar colonización rápida y mejoras paulatinas del suelo.</li>
          <li><strong>Suelo vivo:</strong> cada celda tiene humedad, nutrientes, compacidad, temperatura y sol. Estos valores varían con el tiempo y difunden a celdas vecinas.</li>
          <li><strong>Ciclo de vida:</strong> brotes → juvenil → planta madura. El progreso depende de la combinación de humedad y nutrientes; condiciones secas o compactadas llevan a dormancia o muerte, devolviendo materia orgánica.</li>
          <li><strong>Reproducción:</strong> una planta madura con buena salud esparce semillas a las celdas adyacentes siempre que haya humedad y nutrientes suficientes.</li>
          <li><strong>Equilibrio realista:</strong> las plantas consumen recursos y los devuelven al morir; la humedad se estabiliza con el clima local, mientras que la compacidad responde a cambios de agua y raíces.</li>
        </ul>
      </section>
    </section>
  </main>

  <footer class="site-footer">
    <p>Prototipo funcional enfocado en accesibilidad, rendimiento y jugabilidad móvil.</p>
    <p>Controles: teclas de flecha o botones en pantalla. Espacio para vaciar.</p>
  </footer>
</body>
</html>
